<!DOCTYPE html>
<html dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: Tahoma; padding: 10px; background: #f0f0f0; direction: rtl; }
        .box { background: #fff; padding: 15px; border-radius: 10px; box-shadow: 0 4px 8px #bbb; }
        .inputs { margin-bottom: 15px; }
        input { padding: 10px; width: 60%; border: 1px solid #ccc; border-radius: 5px; margin: 5px 0; }
        button { padding: 10px 15px; cursor: pointer; border: none; border-radius: 5px; font-weight: bold; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; background: #fff; }
        th, td { border: 1px solid #444; padding: 10px; text-align: center; font-size: 13px; }
        th { background: #34495e; color: #fff; }
        .p-done { background: #c8e6c9 !important; }
        .s-done { background: #e3f2fd; border: 2px solid #2196f3 !important; }
        .edit-btn { font-size: 10px; color: #ffeb3b; display: block; cursor: pointer; margin-top: 5px; }
        .del-btn { font-size: 10px; color: #ff5252; display: block; cursor: pointer; margin-top: 5px; }
    </style>
</head>
<body>

<div class="box">
    <div class="inputs">
        <input type="text" id="p_input" placeholder="Ù†Ø§Ù… Ù¾Ø±ÙˆÚ˜Ù‡ Ø¬Ø¯ÛŒØ¯">
        <button onclick="addNewP()" style="background:#27ae60; color:#fff">+ Ù¾Ø±ÙˆÚ˜Ù‡</button>
        <br>
        <input type="text" id="s_input" placeholder="Ù†Ø§Ù… Ù…Ø±Ø­Ù„Ù‡ Ø¬Ø¯ÛŒØ¯">
        <button onclick="addNewS()" style="background:#2980b9; color:#fff">+ Ù…Ø±Ø­Ù„Ù‡</button>
    </div>

    <div style="overflow-x: auto;">
        <table>
            <thead id="h_table"></thead>
            <tbody id="b_table"></tbody>
        </table>
    </div>
    
    <button onclick="downloadJSON()" style="width:100%; margin-top:20px; background:#8e44ad; color:#fff; padding:12px;">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ ÙØ§ÛŒÙ„ Ù¾Ø´ØªÛŒØ¨Ø§Ù†</button>
</div>

<script>
    // Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ú©Ù„ÛŒØ¯ Ú©Ø§Ù…Ù„Ø§Ù‹ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø±ÙØ¹ Ù…Ø´Ú©Ù„ Ø§Ø¶Ø§ÙÙ‡ Ù†Ø´Ø¯Ù†
    var KEY_S = "FINAL_STEPS_V20";
    var KEY_P = "FINAL_PROJS_V20";

    var steps = JSON.parse(localStorage.getItem(KEY_S)) || [];
    var projs = JSON.parse(localStorage.getItem(KEY_P)) || [];

    function sync() {
        localStorage.setItem(KEY_S, JSON.stringify(steps));
        localStorage.setItem(KEY_P, JSON.stringify(projs));

        // Ø±Ù†Ø¯Ø± Ø³Ø±ØªÛŒØªØ±Ù‡Ø§ (Ù…Ø±Ø§Ø­Ù„)
        var h = document.getElementById('h_table');
        var hHtml = '<tr><th>Ù¾Ø±ÙˆÚ˜Ù‡</th>';
        for(var i=0; i<steps.length; i++) {
            hHtml += '<th>' + 
                     '<span onclick="renameS('+i+')">' + steps[i] + '</span>' +
                     '<small class="del-btn" onclick="delS('+i+')">Ø­Ø°Ù</small></th>';
        }
        h.innerHTML = hHtml + '</tr>';

        // Ø±Ù†Ø¯Ø± Ø¨Ø¯Ù†Ù‡ (Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§)
        var b = document.getElementById('b_table');
        var bHtml = '';
        for(var j=0; j<projs.length; j++) {
            var p = projs[j];
