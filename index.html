<!DOCTYPE html>
<html dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ú¯Ø§Ù‡</title>
    <style>
        body { font-family: Tahoma; padding: 10px; direction: rtl; background: #f0f2f5; }
        .box { background: #fff; padding: 15px; border-radius: 12px; border: 1px solid #ccc; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .header { text-align: center; margin-bottom: 20px; color: #1a73e8; }
        input { padding: 12px; width: 65%; border: 2px solid #dfe1e5; border-radius: 8px; font-size: 14px; }
        button { padding: 10px 15px; cursor: pointer; border-radius: 8px; border: none; font-weight: bold; color: #fff; margin: 2px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; background: white; }
        th, td { border: 1px solid #bdc3c7; padding: 12px; text-align: center; vertical-align: top; }
        th { background: #34495e; color: white; }
        .done-p { background: #d4edda !important; }
        .done-s { background: #e3f2fd !important; border: 2px solid #2196f3 !important; }
        .date-label { color: #d35400; font-weight: bold; font-size: 10px; display: block; margin-bottom: 4px; border-bottom: 1px solid #eee; }
        .log-text { text-align: right; font-size: 12px; white-space: pre-wrap; cursor: pointer; min-height: 30px; }
        .btn-tiny { font-size: 10px; padding: 5px; margin-top: 5px; width: 100%; }
    </style>
</head>
<body>

<div class="box">
    <div class="header"><h2>ğŸ›  Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ú¯Ø§Ù‡</h2></div>

    <div style="margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 15px;">
        <input type="text" id="p_in" placeholder="Ù†Ø§Ù… Ù¾Ø±ÙˆÚ˜Ù‡ (Ù…Ø«Ù„: ØªØ§Ø¨Ù„Ùˆ Ø¨Ø±Ù‚ ÙÙ„Ø§Ù†)">
        <button onclick="addProject()" style="background:#28a745">+ Ø§ÙØ²ÙˆØ¯Ù† Ù¾Ø±ÙˆÚ˜Ù‡</button>
        <br><br>
        <input type="text" id="s_in" placeholder="Ù†Ø§Ù… Ù…Ø±Ø­Ù„Ù‡ (Ù…Ø«Ù„: Ø³ÛŒÙ…â€ŒÚ©Ø´ÛŒ)">
        <button onclick="addStep()" style="background:#007bff">+ Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø±Ø­Ù„Ù‡</button>
    </div>

    <div style="overflow-x: auto;">
        <table id="mainTable">
            <thead id="h_t"></thead>
            <tbody id="b_t"></tbody>
        </table>
    </div>

    <div style="margin-top: 25px; display: flex; gap: 10px;">
        <button onclick="exportData()" style="flex: 1; background:#6f42c1;">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ ÙØ§ÛŒÙ„ Ù¾Ø´ØªÛŒØ¨Ø§Ù†</button>
        <button onclick="document.getElementById('fileIn').click()" style="flex: 1; background:#dc3545;">ğŸ“¥ Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù† Ø§Ø·Ù„Ø§Ø¹Ø§Øª</button>
        <input type="file" id="fileIn" style="display:none" onchange="importData(event)">
    </div>
</div>

<script>
    // Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§Ø³Ù… Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø­Ø§ÙØ¸Ù‡ Ø¬Ù‡Øª Ø±ÙØ¹ ØªØ¯Ø§Ø®Ù„
    var projects = JSON.parse(localStorage.getItem('WORKSHOP_FINAL_DATA')) || [];
    var steps = JSON.parse(localStorage.getItem('WORKSHOP_STEPS')) || [];

    function refresh() {
        localStorage.setItem('WORKSHOP_FINAL_DATA', JSON.stringify(projects));
        localStorage.setItem('WORKSHOP_STEPS', JSON.stringify(steps));

        // Ø±Ù†Ø¯Ø± Ø³Ø±
